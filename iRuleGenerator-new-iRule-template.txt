###
### IRULEGENERATOR::REQUEST TO SUBMIT NEW IRULE (EXAMPLE TEMPLATE) 
###


<!-- fields below are mandatory -->


<!-- NAME -->

HTTP to HTTPS redirect on 401

<!-- END NAME -->




<!-- DESCRIPTION -->

This iRule is built for a very specific deployment scenario which displays some ... interesting behaviors.  The requirement was to redirect back to the proper HTTPS URL for the site if authorization was required. This is done to ensure that things are secure where they need to be before allowing people to enter auth information.  I know it's not the most straight-forward way of doing things, but this particular deployment didn't have another workaround, so iRules came to the rescue.

<!-- END DESCRIPTION -->




<!-- IRULE_CODE -->

when HTTP_REQUEST {
   set host [HTTP::host]
   set uri [HTTP::uri]
}
when HTTP_RESPONSE {
   if {[HTTP::status] == 401]}{
      HTTP::redirect "https://$host/$uri"
   }
}

<!-- END_IRULE_CODE -->




<!-- AUTHOR -->

Your name in mose cases
Name (mandatory):
E-Mail address (optional):
DevCentral personnal profile (optional):

<!-- END_AUTHOR -->




<!-- At least one of the fields below is mandatory -->


<!-- USAGE -->

1. Create a pool with the name redirect_pool
2. Create a custom 401 html page
3. Add the new iRule

<!-- END_USAGE -->





<!-- REFERENCE -->

https://devcentral.f5.com/Default.aspx?tabid=xx&forumid=x&postid=xxxxx&view=topic

<!-- END_REFERENCE -->



